<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="StyleSheet" href="../css/ourpetstore.css" type="text/css" media="screen"/>
</head>
<body>
<header th:replace="common/adminTop"></header>
<div id="Content">
    <h2>Edit Category</h2>
    <form action="/houTai/categoryEdit" method="post">
        <table>
            <tr>
                <td>Category ID:</td>
                <td><input type="text" name="categoryId" th:value="${category.categoryId}"/></td>
            </tr>
            <tr>
                <td>Category Name:</td>
                <td><input type="text" name="categoryName" th:value="${category.categoryName}"/></td>
            </tr>
            <tr>
                <td>Description:</td>
                <td><input type="text" name="description" th:value="${category.description}" readonly="readonly"/></td>
            </tr>
            <tr>
                <td>Image:</td>
                <td>
                    <input type="file" id="imageInput" name="image" style="display: none;" accept="image/*"/>
                    <button type="button" onclick="document.getElementById('imageInput').click()">Upload Image</button>
                    <img id="imagePreview" th:src="'../'+${category.image}" alt="Image Preview" style="max-width: 200px; max-height: 200px;"/>
                </td>
            </tr>

            <tr>
                <td >
                    <input type="submit" value="Update Category"/>
                </td>
                <td><input type="button" value="Cancel" onclick="history.back()"/></td>
            </tr>
        </table>
    </form>
</div>
<footer th:replace="common/adminBottom"></footer>
</body>
<script>
    function handleFileSelect(event) {
        const file = event.target.files[0];
        const reader = new FileReader();

        reader.onload = function (e) {
            document.getElementById('imagePreview').src = e.target.result;
        };

        reader.readAsDataURL(file);
    }

    // Event listener to trigger handleFileSelect when a file is selected
    document.getElementById('imageInput').addEventListener('change', handleFileSelect);
</script>

</html>